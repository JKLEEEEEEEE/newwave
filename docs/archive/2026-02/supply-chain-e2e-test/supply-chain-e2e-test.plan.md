# κ³µκΈ‰λ§ λ¦¬μ¤ν¬ ν™”λ©΄ E2E ν†µν•©ν…μ¤νΈ κ³„νμ„

> μ‘μ„±μΌ: 2026-02-06
> Feature ID: supply-chain-e2e-test
> λ©ν‘: κ³µκΈ‰λ§ λ¦¬μ¤ν¬ λ¨λ‹ν„°λ§ ν™”λ©΄μ μ „μ²΄ κΈ°λ¥ κ²€μ¦

---

## 1. κ°μ”

### 1.1 λ©μ 
- κ³µκΈ‰λ§ λ¦¬μ¤ν¬ ν™”λ©΄ μ§„μ…λ¶€ν„° λ¨λ“  νƒ­/κΈ°λ¥μ μ •μƒ λ™μ‘ κ²€μ¦
- API μ‘λ‹µ λ°μ΄ν„°μ μ •ν™•μ„± ν™•μΈ
- UI μ»΄ν¬λ„νΈ λ λ”λ§ λ° μΈν„°λ™μ… κ²€μ¦
- E2E(End-to-End) μ‹λ‚λ¦¬μ¤ κΈ°λ° ν…μ¤νΈ

### 1.2 ν…μ¤νΈ λ²”μ„

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                    Risk Monitoring ν™”λ©΄                      β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚  [Tab 1] Risk Overview    - ν¬νΈν΄λ¦¬μ¤ μ „μ²΄ μ”μ•½              β”‚
β”‚  [Tab 2] Supply Chain     - κ³µκΈ‰λ§ κ·Έλν”„ μ‹κ°ν™”              β”‚
β”‚  [Tab 3] Risk Signals     - μ‹¤μ‹κ°„ μ‹ νΈ λ©λ΅                  β”‚
β”‚  [Tab 4] Score Breakdown  - μ μ μƒμ„Έ λ¶„ν•΄                    β”‚
β”‚  [Tab 5] AI Insights      - AI λ¶„μ„ κ²°κ³Ό                      β”‚
β”‚  [Tab 6] Simulation       - What-If μ‹λ‚λ¦¬μ¤                  β”‚
β”‚  [Tab 7] Prediction       - ML μμΈ΅                           β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

### 1.3 ν…μ¤νΈ λ λ²¨

| λ λ²¨ | μ„¤λ… | λ„κµ¬ |
|------|------|------|
| API ν…μ¤νΈ | μ—”λ“ν¬μΈνΈ μ‘λ‹µ κ²€μ¦ | pytest + httpx |
| μ»΄ν¬λ„νΈ ν…μ¤νΈ | UI λ λ”λ§ κ²€μ¦ | Jest + React Testing Library |
| E2E ν…μ¤νΈ | μ‚¬μ©μ μ‹λ‚λ¦¬μ¤ κ²€μ¦ | Playwright |

---

## 2. ν…μ¤νΈ λ€μƒ μƒμ„Έ

### 2.1 Tab 1: Risk Overview

**API μ—”λ“ν¬μΈνΈ:**
- `GET /api/v2/deals` - λ” λ©λ΅
- `GET /api/v3/status/summary` - Statusλ³„ μ”μ•½

**κ²€μ¦ ν•­λ©:**
| ID | ν•­λ© | μμƒ κ²°κ³Ό |
|----|------|----------|
| OV-01 | λ” λ©λ΅ λ΅λ”© | λ” μΉ΄λ“ ν‘μ‹ |
| OV-02 | Status μ”μ•½ | PASS/WARNING/FAIL μΉ΄μ΄νΈ |
| OV-03 | ν‰κ·  μ μ κ³„μ‚° | μ«μ ν‘μ‹ |
| OV-04 | λ” μ„ νƒ | μƒμ„Έ ν¨λ„ μ—΄λ¦Ό |
| OV-05 | μ •λ ¬ κΈ°λ¥ | μ μμ/μ΄λ¦„μ |

---

### 2.2 Tab 2: Supply Chain Graph

**API μ—”λ“ν¬μΈνΈ:**
- `GET /api/v2/deals/{deal_id}/supply-chain`
- `GET /api/v3/companies/{id}/supply-chain`

**κ²€μ¦ ν•­λ©:**
| ID | ν•­λ© | μμƒ κ²°κ³Ό |
|----|------|----------|
| SC-01 | κ·Έλν”„ λ λ”λ§ | Canvasμ— λ…Έλ“/μ—£μ§€ ν‘μ‹ |
| SC-02 | μ¤‘μ‹¬ λ…Έλ“ | λ€μƒ κΈ°μ—…μ΄ μ¤‘μ•™μ— μ„μΉ |
| SC-03 | κ³µκΈ‰μ‚¬ λ…Έλ“ | π­ μ•„μ΄μ½, λ³΄λΌμƒ‰ ν…λ‘λ¦¬ |
| SC-04 | κ³ κ°μ‚¬ λ…Έλ“ | π›’ μ•„μ΄μ½, μ²­λ΅μƒ‰ ν…λ‘λ¦¬ |
| SC-05 | κ²½μμ‚¬ λ…Έλ“ | β”οΈ μ•„μ΄μ½, μ£Όν™©μƒ‰ ν…λ‘λ¦¬ |
| SC-06 | λ…Έλ“ νΈλ²„ | ν΄ν ν‘μ‹ (μ μ, μ‚°μ—…) |
| SC-07 | λ…Έλ“ ν΄λ¦­ | μƒμ„Έ ν¨λ„ ν‘μ‹ |
| SC-08 | μ—£μ§€ κµµκΈ° | riskTransferμ— λΉ„λ΅€ |
| SC-09 | λ…Έλ“ μƒ‰μƒ | μ μλ³„ (μ΄λ΅/λ…Έλ‘/λΉ¨κ°•) |
| SC-10 | λ…Έλ“ μ ν‘μ‹ | ν—¤λ”μ— λ…Έλ“/κ΄€κ³„ μ |

**λ°μ΄ν„° κ²€μ¦:**
```json
{
  "nodes": [
    {"id": "...", "name": "...", "type": "company|supplier|customer", "riskScore": 0-100}
  ],
  "edges": [
    {"source": "...", "target": "...", "riskTransfer": 0.0-1.0}
  ]
}
```

---

### 2.3 Tab 3: Risk Signals

**API μ—”λ“ν¬μΈνΈ:**
- `GET /api/v2/signals?limit=N`
- `WebSocket /ws/signals`

**κ²€μ¦ ν•­λ©:**
| ID | ν•­λ© | μμƒ κ²°κ³Ό |
|----|------|----------|
| SG-01 | μ‹ νΈ λ©λ΅ λ΅λ”© | μΉ΄λ“ λ¦¬μ¤νΈ ν‘μ‹ |
| SG-02 | κΈ΄κΈ‰ μ‹ νΈ λ°°μ§€ | λΉ¨κ°„μƒ‰ URGENT λ°°μ§€ |
| SG-03 | μ‹ νΈ νƒ€μ… λ¶„λ¥ | LEGAL/MARKET/OPERATIONAL |
| SG-04 | μ‹¤μ‹κ°„ μ—…λ°μ΄νΈ | WebSocket μ—°κ²° μ‹ μλ™ μ¶”κ°€ |
| SG-05 | ν•„ν„°λ§ | μΉ΄ν…κ³ λ¦¬λ³„ ν•„ν„° |

---

### 2.4 Tab 4: Score Breakdown (V3)

**API μ—”λ“ν¬μΈνΈ:**
- `GET /api/v3/companies/{id}/score`

**κ²€μ¦ ν•­λ©:**
| ID | ν•­λ© | μμƒ κ²°κ³Ό |
|----|------|----------|
| SB-01 | μ΄μ  ν‘μ‹ | 0-100 μ«μ |
| SB-02 | Status ν‘μ‹ | PASS/WARNING/FAIL λ°°μ§€ |
| SB-03 | μ§μ ‘/μ „μ΄ λ¶„ν•΄ | λ‘ κ°μ μ§„ν–‰λ°” |
| SB-04 | μΉ΄ν…κ³ λ¦¬λ³„ νƒ­ | 6κ° μ΄μƒ μΉ΄ν…κ³ λ¦¬ |
| SB-05 | μµκ·Ό μ‹ νΈ νƒ­ | μ‹ νΈ λ©λ΅ |
| SB-06 | μ „μ΄ κ²½λ΅ νƒ­ | Propagator λ©λ΅ |

**λ°μ΄ν„° κ²€μ¦:**
```json
{
  "totalScore": 58,
  "status": "WARNING",
  "breakdown": {
    "directScore": 46,
    "propagatedScore": 12
  },
  "categories": [...],
  "recentSignals": [...],
  "propagators": [...]
}
```

---

### 2.5 Tab 5: AI Insights

**API μ—”λ“ν¬μΈνΈ:**
- `GET /api/v2/ai-guide/{deal_id}`
- `POST /api/v2/ai/query`
- `POST /api/v2/ai/analyze-news`

**κ²€μ¦ ν•­λ©:**
| ID | ν•­λ© | μμƒ κ²°κ³Ό |
|----|------|----------|
| AI-01 | RM κ°€μ΄λ“ | μμ—… λ€μ‘ κ°€μ΄λ“ ν…μ¤νΈ |
| AI-02 | OPS κ°€μ΄λ“ | μ΄μ λ€μ‘ κ°€μ΄λ“ ν…μ¤νΈ |
| AI-03 | Text2Cypher | μμ—°μ–΄ β†’ Cypher λ³€ν™ |
| AI-04 | λ‰΄μ¤ λ¶„μ„ | μ‹¬κ°λ„/μΉ΄ν…κ³ λ¦¬ λ°ν™ |
| AI-05 | μ‚°μ—… μΈμ‚¬μ΄νΈ | μ‚°μ—…λ³„ λ¶„μ„ ν…μ¤νΈ |

---

### 2.6 Tab 6: Simulation

**API μ—”λ“ν¬μΈνΈ:**
- `GET /api/v2/scenarios`
- `POST /api/v2/simulate/advanced`
- `POST /api/v2/scenarios/custom`

**κ²€μ¦ ν•­λ©:**
| ID | ν•­λ© | μμƒ κ²°κ³Ό |
|----|------|----------|
| SM-01 | ν”„λ¦¬μ…‹ μ‹λ‚λ¦¬μ¤ λ©λ΅ | 5κ° μ΄μƒ μ‹λ‚λ¦¬μ¤ |
| SM-02 | μ‹λ‚λ¦¬μ¤ μ„ νƒ | μƒμ„Έ μ •λ³΄ ν‘μ‹ |
| SM-03 | μ‹λ®¬λ μ΄μ… μ‹¤ν–‰ | μν–¥ κΈ°μ—… λ©λ΅ |
| SM-04 | Cascade κ²½λ΅ | μ „μ΄ κ²½λ΅ μ‹κ°ν™” |
| SM-05 | μ»¤μ¤ν…€ μ‹λ‚λ¦¬μ¤ μƒμ„± | μ €μ¥ ν›„ λ©λ΅μ— ν‘μ‹ |
| SM-06 | μ μ λ³€ν™” | delta κ°’ ν‘μ‹ |

---

### 2.7 Tab 7: Prediction (ML)

**API μ—”λ“ν¬μΈνΈ:**
- `GET /api/v2/predict/{deal_id}?periods=30`
- `POST /api/v2/predict/train/{deal_id}`

**κ²€μ¦ ν•­λ©:**
| ID | ν•­λ© | μμƒ κ²°κ³Ό |
|----|------|----------|
| PR-01 | μμΈ΅ μ°¨νΈ | 7/30/90μΌ μμΈ΅μ„  |
| PR-02 | μ‹ λΆ° κµ¬κ°„ | μƒ/ν•ν•μ„  ν‘μ‹ |
| PR-03 | νΈλ λ“ ν‘μ‹ | increasing/decreasing/stable |
| PR-04 | λ¨λΈ ν•™μµ | ν•™μµ μ™„λ£ λ©”μ‹μ§€ |
| PR-05 | Fallback ν‘μ‹ | Prophet λ―Έμ„¤μΉ μ‹ μ•λ‚΄ |

---

## 3. E2E ν…μ¤νΈ μ‹λ‚λ¦¬μ¤

### Scenario 1: μ‹ κ· μ‚¬μ©μ ν™”λ©΄ νƒμƒ‰
```gherkin
Given μ‚¬μ©μκ°€ Risk Monitoring ν™”λ©΄μ— μ ‘μ†
When λ” λ©λ΅μ΄ λ΅λ”©λλ©΄
Then λ¨λ“  λ” μΉ΄λ“κ°€ ν‘μ‹λμ–΄μ•Ό ν•¨
And ν‰κ·  μ μκ°€ κ³„μ‚°λμ–΄μ•Ό ν•¨

When SKν•μ΄λ‹‰μ¤ λ”μ„ ν΄λ¦­ν•λ©΄
Then Supply Chain κ·Έλν”„κ°€ ν‘μ‹λμ–΄μ•Ό ν•¨
And 9κ° μ΄μƒμ λ…Έλ“κ°€ λ λ”λ§λμ–΄μ•Ό ν•¨
```

### Scenario 2: λ¦¬μ¤ν¬ λ¶„μ„ ν”λ΅μ°
```gherkin
Given SKν•μ΄λ‹‰μ¤ λ”μ΄ μ„ νƒλ μƒνƒ
When Score Breakdown νƒ­ ν΄λ¦­
Then μ§μ ‘ λ¦¬μ¤ν¬μ™€ μ „μ΄ λ¦¬μ¤ν¬κ°€ λ¶„λ¦¬ ν‘μ‹
And μΉ΄ν…κ³ λ¦¬λ³„ μ μ λ©λ΅μ΄ ν‘μ‹

When μ „μ΄ κ²½λ΅ νƒ­ ν΄λ¦­
Then Propagator κΈ°μ—… λ©λ΅μ΄ ν‘μ‹
And κ° κΈ°μ—…μ κΈ°μ—¬λ„κ°€ ν‘μ‹
```

### Scenario 3: μ‹λ®¬λ μ΄μ… μ‹¤ν–‰
```gherkin
Given μ‹λ®¬λ μ΄μ… νƒ­ μ„ νƒ
When "λ¶€μ‚°ν•­ νμ—…" μ‹λ‚λ¦¬μ¤ μ„ νƒ
And μ‹¤ν–‰ λ²„νΌ ν΄λ¦­
Then μν–¥λ°›λ” κΈ°μ—… λ©λ΅μ΄ ν‘μ‹
And Cascade κ²½λ΅κ°€ μ‹κ°ν™”

When μ»¤μ¤ν…€ μ‹λ‚λ¦¬μ¤ μƒμ„± ν΄λ¦­
And νλΌλ―Έν„° μ…λ ¥ ν›„ μ €μ¥
Then μ‹λ‚λ¦¬μ¤ λ©λ΅μ— μ¶”κ°€λ¨
```

---

## 4. ν…μ¤νΈ ν™κ²½

### 4.1 ν•„μ μμ΅΄μ„±
```bash
# Python (API ν…μ¤νΈ)
pip install pytest pytest-asyncio httpx

# JavaScript (UI ν…μ¤νΈ)
npm install --save-dev jest @testing-library/react @playwright/test
```

### 4.2 ν…μ¤νΈ λ°μ΄ν„°
- Neo4j: `load_supply_chain_data.py` μ‹¤ν–‰
- Mock λ¨λ“: `USE_MOCK_DATA=true`

### 4.3 ν™κ²½ λ³€μ
```env
USE_MOCK_DATA=true
NEO4J_URI=bolt://localhost:7687
API_BASE_URL=http://localhost:8000
```

---

## 5. ν…μ¤νΈ νμΌ κµ¬μ΅°

```
risk_engine/
β””β”€β”€ tests/
    β”β”€β”€ e2e/
    β”‚   β”β”€β”€ test_risk_overview.py
    β”‚   β”β”€β”€ test_supply_chain.py
    β”‚   β”β”€β”€ test_risk_signals.py
    β”‚   β”β”€β”€ test_score_breakdown.py
    β”‚   β”β”€β”€ test_ai_insights.py
    β”‚   β”β”€β”€ test_simulation.py
    β”‚   β””β”€β”€ test_prediction.py
    β””β”€β”€ integration/
        β”β”€β”€ test_api_flow.py
        β””β”€β”€ test_data_consistency.py

components/risk/
β””β”€β”€ __tests__/
    β”β”€β”€ RiskGraph.test.tsx
    β”β”€β”€ RiskStatusView.test.tsx
    β””β”€β”€ RiskScoreBreakdownV3.test.tsx
```

---

## 6. μ„±κ³µ κΈ°μ¤€

| κΈ°μ¤€ | λ©ν‘ |
|------|------|
| API ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€ | 100% (λ¨λ“  μ—”λ“ν¬μΈνΈ) |
| UI μ»΄ν¬λ„νΈ ν…μ¤νΈ | μ£Όμ” μ»΄ν¬λ„νΈ 80% |
| E2E μ‹λ‚λ¦¬μ¤ | 3κ° ν•µμ‹¬ μ‹λ‚λ¦¬μ¤ ν†µκ³Ό |
| λ²„κ·Έ λ°κ²¬ | 0 Critical, 0 High |

---

## 7. μΌμ • (μμƒ)

| λ‹¨κ³„ | μ‘μ—… | μ‚°μ¶λ¬Ό |
|------|------|--------|
| Phase 1 | API ν†µν•©ν…μ¤νΈ μ‘μ„± | test_api_flow.py |
| Phase 2 | Supply Chain ν…μ¤νΈ | test_supply_chain.py |
| Phase 3 | Score Breakdown ν…μ¤νΈ | test_score_breakdown.py |
| Phase 4 | UI μ»΄ν¬λ„νΈ ν…μ¤νΈ | *.test.tsx |
| Phase 5 | E2E μ‹λ‚λ¦¬μ¤ ν…μ¤νΈ | Playwright specs |

---

## 8. λ¦¬μ¤ν¬ λ° λ€μ‘

| λ¦¬μ¤ν¬ | μν–¥ | λ€μ‘ |
|--------|------|------|
| Neo4j λ―Έμ—°κ²° | μ‹¤μ  λ°μ΄ν„° ν…μ¤νΈ λ¶κ°€ | Mock λ¨λ“ μ°μ„  μ‚¬μ© |
| WebSocket ν…μ¤νΈ μ–΄λ ¤μ›€ | μ‹¤μ‹κ°„ κΈ°λ¥ κ²€μ¦ μ ν• | ν΄λ§ λ°©μ‹ λ€μ²΄ ν…μ¤νΈ |
| AI μ„λΉ„μ¤ λΉ„μ© | API νΈμ¶ λΉ„μ© | Mock μ‘λ‹µ μ‚¬μ© |

---

*Plan Document Created: 2026-02-06*
